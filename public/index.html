<!DOCTYPE html>
<html>
  <!-- HEAD -->
  <head>
    <title>2-Dogwood Office</title>
    <!-- <script src="https://aframe.io/releases/0.5.0/aframe.min.js"></script> -->

    <script src="https://aframe.io/releases/1.0.3/aframe.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/2.3.0/socket.io.slim.js"></script>
    <script src="https://unpkg.com/networked-aframe@^0.7.0/dist/networked-aframe.min.js"></script>

    <script src="https://unpkg.com/aframe-randomizer-components@^3.0.1/dist/aframe-randomizer-components.min.js"></script>
    <script src="https://unpkg.com/aframe-particle-system-component@1.0.5/dist/aframe-particle-system-component.min.js"></script>
    <script src="/js/camrender.js"></script>
  </head>

  <!-- BODY -->
  <body>
    <!-- A-SCENE -->
    <a-scene
      networked-scene="
      room: basic;
      adapter: webrtc;
      debug: true;
      audio: true;
    "
    >
      <!-- A-ASSETS -->
      <a-assets>
        <a-asset-item id="floor-obj" src="/assets/Floor.obj"></a-asset-item>
        <a-asset-item id="floor-mtl" src="/assets/Floor.mtl"></a-asset-item>
        <a-asset-item
          id="office-obj"
          src="/assets/RoomStructure.obj"
        ></a-asset-item>
        <a-asset-item
          id="office-mtl"
          src="/assets/RoomStructure.mtl"
        ></a-asset-item>

        <img id="sky" src="/assets/test-panorama.jpg" />

        <img
          id="groundTexture"
          src="https://cdn.aframe.io/a-painter/images/floor.jpg"
        />

        <img id="wallTexture" src="/assets/black-paper.jpg" />

        <canvas id="tv"></canvas>

        <a-asset-item id="chair" src="/assets/scene.gltf"></a-asset-item>
      </a-assets>

      <!-- Avatar -->
      <template id="avatar-template">
        <a-entity class="avatar" networked-audio-source>
          <a-entity class="body">
            <a-sphere scale="0.2 0.2 0.2" position="0 -0.4 0.0"></a-sphere>
            <a-cylinder scale="0.2 0.1 0.2" position="0 -0.45 0.0"></a-cylinder>
            <a-sphere scale="0.2 0.2 0.2" position="0 -0.5 0.0"></a-sphere>
          </a-entity>
          <a-sphere
            class="head"
            color="#fff"
            scale="0.25 0.25 0.25"
            src="/assets/face.jpg"
            rotation="0 90 0"
          ></a-sphere>
        </a-entity>
      </template>

      <!-- A-COMPONENTS -->
      <a-obj-model
        src="#office-obj"
        scale="0.01 0.01 0.01"
        position="2.8 0 -2.4"
        rotation="0 270 0"
        mtl="#office-mtl"
      >
      </a-obj-model>
      <a-obj-model
        src="#floor-obj"
        scale="0.01 0.01 0.01"
        position="2.8 0 -2.4"
        rotation="0 270 0"
        mtl="#floor-mtl"
      ></a-obj-model>
      <a-box
        id="office-wall-cover"
        src="#wallTexture"
        repeat="1 1"
        rotation="0 0 0"
        position="2.85 2.25 -5.48"
        color="#CCC"
        height="5"
        width="5"
        depth="0.25"
      ></a-box>

      <!-- TV -->
      <a-entity
        camera="active: false; fov: 80; zoom: 0.8; spectator: true"
        camrender="cid: tv"
        position="2.85 3.2 -5.1"
        rotation="4.5 148.6 10.94"
      >
      </a-entity>

      <a-plane
        position="2.8 2 -5.3"
        rotation="0 0 0"
        width="2.8"
        height="1.5"
        material="src:#tv; opacity: .95"
        canvas-updater
      >
        <a-box
          color="black"
          width="3"
          height="1.7"
          depth=".1"
          position="0 0 -0.065"
        ></a-box>
        <a-entity
          camera="active: false; zoom: 0.8"
          camrender="cid: tv"
          position="-1.8 1 0.1"
          rotation="0 180 0"
        >
          <a-box color="black" width=".1" height=".1" depth=".1"></a-box>
        </a-entity>
      </a-plane>

      <!-- Chairs -->
      <a-entity
        scale="0.0015 0.0015 0.0015"
        position="1.5 1 -4"
        rotation="0 90"
        gltf-model="#chair"
      ></a-entity>
      <a-entity
        scale="0.0015 0.0015 0.0015"
        position="1.5 1 -2.8"
        rotation="0 90"
        gltf-model="#chair"
      ></a-entity>
      <a-entity
        scale="0.0015 0.0015 0.0015"
        position="4 1 -4"
        rotation="0 270"
        gltf-model="#chair"
      ></a-entity>
      <a-entity
        scale="0.0015 0.0015 0.0015"
        position="4 1 -2.8"
        rotation="0 270"
        gltf-model="#chair"
      ></a-entity>

      <!-- Table -->
      <a-box
        color="#CACFD2"
        id="table"
        position="2.8 1 -3.5"
        width="1.8"
        height="0.1"
        depth="3.5"
      >
        <a-cylinder
          color="#CACFD2"
          id="table_edge"
          position="0 0 1.75"
          radius=".9"
          height="0.1"
          depth="1"
        >
          <a-cylinder
            id="table_leg"
            color="#566573"
            position="0 -0.6 0"
            radius="0.06"
            height="1.2"
          ></a-cylinder>
          <a-box
            id="table-base"
            color="#566573"
            position="0 -1.1 0"
            width="0.9"
            height="0.03"
            depth="0.9"
          ></a-box>
        </a-cylinder>
      </a-box>

      <!-- Whiteboard -->
      <a-box
        color="#CACFD2"
        id="whiteboard"
        position="2.75 2.5 1.12"
        width="3.3"
        height="2"
        depth="0.03"
      ></a-box>
      <a-box
        color="#CACFD2"
        opacity="0.4"
        id="whiteboard-glass"
        position="2.75 2.5 1.1"
        width="3.33"
        height="2.03"
        depth="0.03"
      ></a-box>

      <!-- Door Entrance -->
      <a-entity id="door_entrance_parent" position="0.335 0 -2.3">
        <a-entity id="panes1_parent" height="5" position="0 2.263 0">
          <a-box
            id="pane_1"
            width="0.04"
            depth="2.1"
            height="1.6"
            opacity="0.2"
            position="0 1.6 0"
          ></a-box>
          <a-box
            id="pane_2"
            width="0.04"
            depth="2.1"
            height="1.6"
            opacity="0.9"
            color="silver"
            position="0 0 0"
          ></a-box>
          <a-box
            id="pane_3"
            width="0.04"
            depth="2.1"
            height="1.6"
            opacity="0.2"
            position="0 -1.6 0"
          ></a-box>
        </a-entity>

        <a-entity id="panes2_parent" height="5" position="0 2.263 2.12">
          <a-box
            id="pane_1"
            width="0.04"
            depth="2.1"
            height="1.6"
            opacity="0.2"
            position="0 1.6 0"
          ></a-box>
          <a-box
            id="pane_2"
            width="0.04"
            depth="2.1"
            height="1.6"
            opacity="0.9"
            color="silver"
            position="0 0 0"
          ></a-box>
          <a-box
            id="pane_3"
            width="0.04"
            depth="2.1"
            height="1.6"
            opacity="0.2"
            position="0 -1.6 0"
          ></a-box>
        </a-entity>

        <a-entity id="panes2_parent" height="5" position="0 2.263 -2.12">
          <a-box
            id="pane_1"
            width="0.04"
            depth="2.1"
            height="1.6"
            opacity="0.2"
            position="0 1.6 0"
          ></a-box>
          <a-box
            id="pane_2"
            width="0.04"
            depth="2.1"
            height="1.6"
            opacity="0.9"
            color="silver"
            position="0 0 0"
          ></a-box>
          <a-box
            id="pane_3"
            width="0.04"
            depth="2.1"
            height="1.6"
            opacity="0.2"
            position="0 -1.6 0"
          ></a-box>
        </a-entity>
      </a-entity>

      <!-- Exterior 
      <a-entity id="exterior_parent">
	       <a-plane
		      id="floor"
		      src="#ground"
		      rotation="-90 0 0"
		      height="100"
		      width="100">
          </a-plane>
      </a-entity->-->

      <a-sky src="#sky" rotation="0 270 0"></a-sky>

      <!-- Player -->
      <a-entity
        id="player"
        camera
        networked="template:#avatar-template;attachTemplateToLocal:false;"
        position="0 1.6 0"
        spawn-in-circle="radius:3"
        wasd-controls
        look-controls
      >
        <a-sphere class="head" visible="false" random-color></a-sphere>
      </a-entity>

      <a-entity gltf-model="#tree"></a-entity>
    </a-scene>
  </body>
</html>
